(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28be78c8"],{"20a4":function(t,i,n){},"62d1":function(t,i,n){"use strict";var o=n("20a4"),e=n.n(o);e.a},"78a5":function(t,i,n){"use strict";n.r(i);var o=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",[n("div",{ref:"city",attrs:{id:"city"}},[n("div",{staticClass:"city"},[n("span",[t._v(t._s(t.mes))]),n("div",{staticClass:"hotcity"},[n("ul",t._l(t.CityHot,(function(i,o){return n("li",{key:o,on:{tap:function(n){return t.hand(i.nm,i.id)}}},[t._v(t._s(i.nm))])})),0)]),n("div",{ref:"sort",staticClass:"allcities"},t._l(t.CityList,(function(i,o){return n("div",{key:o,staticClass:"sort"},[n("h2",[t._v(t._s(i.index))]),n("ul",t._l(i.list,(function(i,o){return n("li",{key:o,on:{tap:function(n){return t.hand(i.nm,i.id)}}},[t._v(t._s(i.nm))])})),0)])})),0)]),n("div",{staticClass:"scroll"},[n("ul",t._l(t.CityList,(function(i,o){return n("li",{key:o,on:{touchstart:function(i){return t.position(o)}}},[t._v(t._s(i.index))])})),0)])])])},e=[],s=n("1fba"),a={name:"City",components:{},data:function(){return{CityList:"",CityHot:"",mes:""}},mounted:function(){var t=this,i=window.localStorage.getItem("CityList"),n=window.localStorage.getItem("CityHot");i&&n?(this.CityList=JSON.parse(i),this.CityHot=JSON.parse(n),console.log("数据已加载"),this.$nextTick((function(){var i=new s["a"](t.$refs.city,{tap:!0,probeType:1});i.on("scroll",(function(i){i.y>30&&(t.mes="正在更新中")})),i.on("touchEnd",(function(i){i.y>30&&(t.mes="更新成功"),setTimeout((function(){t.mes=""}),2e3)}))}))):this.$axios.get("/api/cityList").then((function(i){console.log(i.data.data.cities);var n=i.data.data.cities,o=t.format(n),e=o.citylist,a=o.hotcity;t.CityList=e,t.CityHot=a,window.localStorage.setItem("CityList",JSON.stringify(t.CityList)),window.localStorage.setItem("CityHot",JSON.stringify(t.CityHot)),t.$nextTick((function(){var i=new s["a"](t.$refs.city,{tap:!0,probeType:1});i.on("scroll",(function(i){i.y>30&&(t.mes="正在更新中")})),i.on("touchEnd",(function(i){i.y>30&&(t.mes="更新成功"),setTimeout((function(){t.mes=""}),2e3)}))}))})).catch((function(t){console.log(t)}))},methods:{format:function(t){for(var i=[],n=[],o=0;o<t.length;o++){var e=t[o].py.substring(0,1).toUpperCase();if(1===t[o].isHot&&n.push(t[o]),a(e))i.push({index:e,list:[{id:t[o].id,nm:t[o].nm}]});else for(var s=0;s<i.length;s++)i[s].index===e&&i[s].list.push({id:t[o].id,nm:t[o].nm})}function a(t){for(var n=0;n<i.length;n++)if(i[n].index===t)return!1;return!0}return i.sort((function(t,i){return t.index<i.index?-1:t.index>i.index?1:0})),{citylist:i,hotcity:n}},position:function(t){var i=this.$refs.sort.getElementsByTagName("h2");document.documentElement.scrollTop=i[t].offsetTop-98},hand:function(t,i){this.$store.commit("city/CITY_INFO",{nm:t,id:i}),window.localStorage.setItem("nowNm",t),window.localStorage.setItem("nowId",i),this.$router.push("/movie/playing")}}},c=a,r=(n("62d1"),n("2877")),u=Object(r["a"])(c,o,e,!1,null,"77dea7da",null);i["default"]=u.exports}}]);
//# sourceMappingURL=chunk-28be78c8.9bd50df1.js.map